{% extends 'base.html' %}

{% load static %}

{% block title %}- Display{% endblock %}

{% block links %}
<link rel="stylesheet" href="{% static 'display.css' %}">
{% endblock links %}

{% block content %}

{% if bidround == 0 %}
    <div class="container">
        <div class="row"><h2>Choose a tender</h2></div>
        {% for tender in tenders %}
        <div class="row">
            <a href="{% url 'display' tenderid=tender.id bidround=1  %}">{{ tender }}</a>
        </div>
        {% endfor %}
    </div>
{% else %}
        <div class="container text-center">
            <div class="row mb-3 bg-light border">
                <div class="col"></div>
                <div class="col-1">               
                    {% if bidround > 1 %}
                    <a href="{% url 'display' tenderid=tenderid bidround=1 %}">
                        <i class="fas fa-angle-double-left fa-2x"></i>
                    </a>                      
                    <a href="{% url 'display' tenderid=tenderid bidround=previous %}">
                        <i class="fas fa-angle-left fa-2x"></i>
                    </a>
                    {% endif %}
                </div>
                <div class="col-3">
                    {% if bidround > 1 %}
                    <h3>Round {{ previous }}</h3>
                    {% endif %}
                </div>
                <div class="col-3"><h3>Round {{ bidround }}</h3></div>
                <div class="col-3">
                    <h3>Round {{ next }}</h3>
                </div>
                <div class="col-1">
                    {% if bidround < 9 %}                  
                    <a href="{% url 'display' tenderid=tenderid bidround=next %}">
                        <i class="fas fa-angle-right fa-2x"></i>
                    </a>
                    <a href="{% url 'display' tenderid=tenderid bidround=9 %}">
                        <i class="fas fa-angle-double-right fa-2x"></i>
                    </a>                      
                    {% endif %}
                </div>                
            </div>  
            <div class="row border">
                <div class="col"></div>
                <div class="col-3 px-md-5">
                    {% if bidround > 1 %}
                    <label class="float-start">price</label>
                    <label class="float-end">amount</label>
                    {% endif %}
                </div>
                <div class="col-3 px-md-5">
                    <label class="float-start">price</label>
                    <label class="float-end">amount</label>
                </div>
                <div class="col-3 px-md-5">
                    <label class="float-start">price</label>
                    <label class="float-end">amount</label>
                </div>
                <div class="col-1"></div>
            </div>      
        </div>
        <div class="container">
            {% for unit in units %}
            <div class="row border">
                <div class="col d-flex align-items-center bg-light">
                    {{ unit.fromdate }} <br>
                    {{ unit.todate }}
                </div>
                <div class="col-3 px-md-5 py-2">
                    {% for bid in bids %}
                    <div class="row">
                        {% if bid.unit == unit and bid.bid_round == previous %}
                        <label>
                            <span class="float-start {% if bid.ours == True %}text-success{% endif %}">
                                {{ bid.price }}
                            </span>
                            <span class="float-end {% if bid.ours == True %}text-success{% endif %}">
                                {{ bid.amount }}
                            </span>
                        </label>
                        {% endif %}                        
                    </div>
                    {% endfor %}
                </div>
                <div class="col-3 px-md-5 py-2">
                    {% for bid in bids %}
                    <div class="row">
                        {% if bid.unit == unit and bid.bid_round == bidround %}
                        <label>
                            <span class="float-start {% if bid.ours == True %}text-success{% endif %}">
                                {{ bid.price }}
                            </span>
                            <span class="float-end {% if bid.ours == True %}text-success{% endif %}">
                                {{ bid.amount }}
                            </span>
                        </label>
                        {% endif %}                        
                    </div>
                    {% endfor %}
                </div>
                <div class="col-3 px-md-5 py-2">
                    {% for bid in bids %}
                    <div class="row">
                        {% if bid.unit == unit and bid.bid_round == next %}
                        <label>
                            <span class="float-start {% if bid.ours == True %}text-success{% endif %}">
                                {{ bid.price }}
                            </span>
                            <span class="float-end {% if bid.ours == True %}text-success{% endif %}">
                                {{ bid.amount }}
                            </span>
                        </label>
                        {% endif %}                        
                    </div>
                    {% endfor %}
                </div>
                <div class="col-1"></div>
            </div>
            {% endfor %}
    </div>
{% endif %}

{% endblock content %}